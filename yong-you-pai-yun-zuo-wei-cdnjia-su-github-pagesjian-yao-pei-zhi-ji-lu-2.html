<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>使用又拍云加速GitHub Pages简要配置 - Merack&#x27;s Home</title><meta name="description" content="GitHub Pages为GitHub上的项目提供主页托管功能, 我们可以用它来托管我们的静态网站. 但是由于GitHub Pages服务器在国外, 因此在国内的访问速度可能不太理想.但是我们可以通过CDN来加速它的访问速度. 正巧又拍云推出了开发者计划, 为开发者提供每月10G的云存储和15G的CDN流量, 对于个人网站来说已经足够了. 下面是我为GitHub Pages配置又拍云CDN加速的一些简要配置记录."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://blog.merack.top/yong-you-pai-yun-zuo-wei-cdnjia-su-github-pagesjian-yao-pei-zhi-ji-lu-2.html"><link rel="alternate" type="application/atom+xml" href="https://blog.merack.top/feed.xml"><link rel="alternate" type="application/json" href="https://blog.merack.top/feed.json"><link rel="shortcut icon" href="https://blog.merack.top/media/website/favicon-16x16.png" type="image/png"><link rel="stylesheet" href="https://blog.merack.top/assets/css/style.css"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.merack.top/yong-you-pai-yun-zuo-wei-cdnjia-su-github-pagesjian-yao-pei-zhi-ji-lu-2.html"},"headline":"使用又拍云加速GitHub Pages简要配置","datePublished":"2024-06-07T20:56+08:00","dateModified":"2024-09-22T11:57+08:00","description":"GitHub Pages为GitHub上的项目提供主页托管功能, 我们可以用它来托管我们的静态网站. 但是由于GitHub Pages服务器在国外, 因此在国内的访问速度可能不太理想.但是我们可以通过CDN来加速它的访问速度. 正巧又拍云推出了开发者计划, 为开发者提供每月10G的云存储和15G的CDN流量, 对于个人网站来说已经足够了. 下面是我为GitHub Pages配置又拍云CDN加速的一些简要配置记录.","author":{"@type":"Person","name":"Merack","url":"https://blog.merack.top/authors/merack/"},"publisher":{"@type":"Organization","name":"Merack"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="post-template"><header class="top js-header"><a class="logo" href="https://blog.merack.top/">Merack&#x27;s Home</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://blog.merack.top/about.html" target="_self">About</a></li></ul></nav></header><main class="post"><article class="content"><div class="hero hero--noimage"><header class="hero__content"><div class="wrapper"><h1>使用又拍云加速GitHub Pages简要配置</h1><div class="feed__meta content__meta"><img src="https://blog.merack.top/media/website/qbanjinmuyan_Kan-Tu-Wang.web-2.png" loading="eager" height="500" width="458" class="feed__author-thumb" alt="Merack"> <a href="https://blog.merack.top/authors/merack/" class="feed__author">Merack</a> <time datetime="2024-06-07T20:56" class="feed__date">June 7, 2024</time></div></div></header></div><div class="entry-wrapper content__entry"><p>GitHub Pages为GitHub上的项目提供主页托管功能, 我们可以用它来托管我们的静态网站. 但是由于GitHub Pages服务器在国外, 因此在国内的访问速度可能不太理想.但是我们可以通过CDN来加速它的访问速度. 正巧又拍云推出了开发者计划, 为开发者提供每月10G的云存储和15G的CDN流量, 对于个人网站来说已经足够了. 下面是我为GitHub Pages配置又拍云CDN加速的一些简要配置记录.</p><h2 data-heading="必备条件">必备条件</h2><ol><li>已经备案的域名(国内的CDN厂商基本都要求)</li><li>又拍云账号: <a href="https://console.upyun.com/register/?invite=SJxy8d1Sw" target="_blank" rel="noopener noreferrer">点我注册</a>, 注册完毕后可以到 <a href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral" target="_blank" rel="noopener noreferrer">又拍云联盟</a>页面按要求申请开发者每月免费配额, 一般在自己网站挂一个又拍云的logo然后提交申请就可以了.需要注意的是, 当前你的网站是要有一定内容的不然不会通过(实测我的博客就发了三篇文章就申请通过了).</li></ol><h2 data-heading="简要配置">简要配置</h2><h3 data-heading="GitHub Pages设置">GitHub Pages设置</h3><p>静态网站如何生成不在本文讨论范围, 这里只讨论自定义域名相关话题. 在托管静态网站的GitHub仓库中点击Settings-&gt;Pages-&gt;Custom domain 中配置你已经备案的域名, 比如我这里是blog.merack.top. 需要注意的是如果你的page不是由GitHub Actions workflow生成的, 那么需要确认仓库根目录中有一个CNAME文件, 里面存储的是你自定义域名, 具体请看GitHub Pages的文档: <a rel="noopener" class="external-link" href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#cname-errors" target="_blank">https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#cname-errors</a></p><h3 data-heading="又拍云设置">又拍云设置</h3><h4 data-heading="创建服务">创建服务</h4><p>在又拍云创建CDN服务, 加速域名填你已备案的自定义域名, 应用场景选网页图片, 实际上根据<a data-tooltip-position="top" aria-label="https://help.upyun.com/knowledge-base/%e6%8e%a7%e5%88%b6%e5%8f%b0%e6%9c%8d%e5%8a%a1%e9%85%8d%e7%bd%ae/#1-e68891e683b3e4bfaee694b9e5ba94e794a8e59cbae699afefbc8ce8afb7e997aee6808ee4b988e4bfaee694b9efbc9f" rel="noopener" class="external-link" href="https://help.upyun.com/knowledge-base/%e6%8e%a7%e5%88%b6%e5%8f%b0%e6%9c%8d%e5%8a%a1%e9%85%8d%e7%bd%ae/#1-e68891e683b3e4bfaee694b9e5ba94e794a8e59cbae699afefbc8ce8afb7e997aee6808ee4b988e4bfaee694b9efbc9f" target="_blank">又拍云的文档</a>目前应用场景只是一个标示, 功能是一样的, 随便选也行. 创建完成后又拍云会给出一个CNAME域名, 在域名域名解析中为域名创建一个CNAME记录, 记录值是又拍云会给出的这个CNAME域名.</p><div><figure class="post__image"><img loading="lazy" src="https://blog.merack.top/media/posts/8/1717757460.png" alt="" width="1228" height="292" sizes="(max-width: 1920px) 100vw, 1920px" srcset="https://blog.merack.top/media/posts/8/responsive/1717757460-xs.png 640w, https://blog.merack.top/media/posts/8/responsive/1717757460-sm.png 768w, https://blog.merack.top/media/posts/8/responsive/1717757460-md.png 1024w, https://blog.merack.top/media/posts/8/responsive/1717757460-lg.png 1366w, https://blog.merack.top/media/posts/8/responsive/1717757460-xl.png 1600w, https://blog.merack.top/media/posts/8/responsive/1717757460-2xl.png 1920w"></figure></div><p>回源协议选协议跟随,源站证书校验我这里没开, 源站地址根据<a data-tooltip-position="top" aria-label="https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain" rel="noopener" class="external-link" href="https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain" target="_blank">GitHub Pages的文档</a>填以下IP(建议配置的时候去文档里找, 防止GitHub那边更新IP), 然后点击确定创建服务.</p><p><code>185.199.108.153<br>185.199.109.153<br>185.199.110.153<br>185.199.111.153</code></p><figure class="post__image"><img src="https://blog.merack.top/media/posts/8/1717758315.png" alt="" width="944" height="426" sizes="(max-width: 1920px) 100vw, 1920px" srcset="https://blog.merack.top/media/posts/8/responsive/1717758315-xs.png 640w, https://blog.merack.top/media/posts/8/responsive/1717758315-sm.png 768w, https://blog.merack.top/media/posts/8/responsive/1717758315-md.png 1024w, https://blog.merack.top/media/posts/8/responsive/1717758315-lg.png 1366w, https://blog.merack.top/media/posts/8/responsive/1717758315-xl.png 1600w, https://blog.merack.top/media/posts/8/responsive/1717758315-2xl.png 1920w"></figure><br><figure class="post__image"><img loading="lazy" src="https://blog.merack.top/media/posts/8/1717757656.png" alt="" width="824" height="545" sizes="(max-width: 1920px) 100vw, 1920px" srcset="https://blog.merack.top/media/posts/8/responsive/1717757656-xs.png 640w, https://blog.merack.top/media/posts/8/responsive/1717757656-sm.png 768w, https://blog.merack.top/media/posts/8/responsive/1717757656-md.png 1024w, https://blog.merack.top/media/posts/8/responsive/1717757656-lg.png 1366w, https://blog.merack.top/media/posts/8/responsive/1717757656-xl.png 1600w, https://blog.merack.top/media/posts/8/responsive/1717757656-2xl.png 1920w"></figure><h4>CDN功能设置</h4><p>接着进入到CDN功能配置.</p><h5>回源管理</h5><p>在回源管理中回源Host中填入你自己的自定义域名,  比如我这里是blog.merack.top, 因为源站设置中的IP托管了成千上万个GitHub Pages, 需要回源Host中的域名才能找到你的.</p><figure class="post__image"><img loading="lazy" src="https://blog.merack.top/media/posts/8/1717760653.png" alt="" width="1280" height="271" sizes="(max-width: 1920px) 100vw, 1920px" srcset="https://blog.merack.top/media/posts/8/responsive/1717760653-xs.png 640w, https://blog.merack.top/media/posts/8/responsive/1717760653-sm.png 768w, https://blog.merack.top/media/posts/8/responsive/1717760653-md.png 1024w, https://blog.merack.top/media/posts/8/responsive/1717760653-lg.png 1366w, https://blog.merack.top/media/posts/8/responsive/1717760653-xl.png 1600w, https://blog.merack.top/media/posts/8/responsive/1717760653-2xl.png 1920w"></figure><p><strong>注意!!!</strong>: 如果你在上面的步骤中已经为GitHub仓库配置了自定义域名, 这里的回源Host填上的就是该域名, 而不是xxx.github.io, 否则会造成too many redirects 的错误.</p><h5>验证</h5><p>到这里就可以就可以验证是否配置成功了, 直接ping 或者dig我们的域名, 如果返回的是nm.aicdn.com, 那么就表示我们成功解析到了CDN,访问网站检查是否有其他问题</p><figure class="post__image"><img loading="lazy" src="https://blog.merack.top/media/posts/8/1717761171.png" alt="" width="576" height="252" sizes="(max-width: 1920px) 100vw, 1920px" srcset="https://blog.merack.top/media/posts/8/responsive/1717761171-xs.png 640w, https://blog.merack.top/media/posts/8/responsive/1717761171-sm.png 768w, https://blog.merack.top/media/posts/8/responsive/1717761171-md.png 1024w, https://blog.merack.top/media/posts/8/responsive/1717761171-lg.png 1366w, https://blog.merack.top/media/posts/8/responsive/1717761171-xl.png 1600w, https://blog.merack.top/media/posts/8/responsive/1717761171-2xl.png 1920w"></figure><p>更进一步, 可以使用一些在线ping网站来检测CDN是否根据不同地区就近返回: <a href="https://www.itdog.cn/ping">https://www.itdog.cn/ping</a></p><h5>HTTPS</h5><p>此外强烈建议配置下https, 又拍云申购SSL证书中选择Let's Encrypt是免费的, 又拍云会自动帮你续期.</p><h5>其他配置与注意事项</h5><ol><li>其他的配置按需求点点就行, 需要注意的是我看到一些资料说HTTP 302 调度这个功能可能会造成一些问题, 建议不开这个. </li><li>如果要开源站资源迁移这个功能, 需要配合缓存配置中将资源缓存时间配置为24小时以上才会触发迁移. 如果要验证缓存时间可以通过浏览器的开发者工具检查响应头的Cache-Control字段, 具体可以看<a href="https://docs.upyun.com/cdn/guide/#_6">又拍云的这个文档</a> (https://docs.upyun.com/cdn/guide/#_6). 不过, 除非你了解<a href="https://help.upyun.com/knowledge-base/cdn-source-resource-move/">源站资源迁移的访问机制</a> (https://help.upyun.com/knowledge-base/cdn-source-resource-move/), 否则不建议开启, 会对资源更新造成一些问题.</li><li>如果你的域名挂靠在Cloudflare, 请勿给根域名(即不带任何前缀, 主机记录为@的那个域名 )做CNAME解析(例如, 不能为merack.top添加又拍云的CNAME记录), 因为根据<a href="https://datatracker.ietf.org/doc/html/rfc1912">RFC1912</a>，域名根域名不得存在 CNAME 记录，根域名的 CNAME 记录会与域名的 MX 邮箱记录、TXT 域名验证记录发生冲突, Cloudflare会将该CNAME记录展平(<a href="https://developers.cloudflare.com/dns/cname-flattening/">CNAME flattening</a>), 指向的是又拍云在国外的某个节点, 无论国内国外访问都是请求的这个节点的资源, 那么这就失去了CDN的功能.<br><figure class="alignnone size-full wp-image-40"><img loading="lazy" src="https://cdn.merack.top/wp-content/uploads/2024/06/screenshot_2024_0605_11-58-14.png" alt="" width="1238" height="150" data-is-external-image="true"></figure></li></ol><h2>结语</h2><p>到此又拍云CDN加速GitHub Pages就配置完成了, 本文只是我配置时的一些简要记录, 仅供参考. 如果遇到问题可以通过邮件与我交流. 像其他的一些静态网站加速, 例如GitLab, Vercel, Netlify, Cloudflare Pages, 思路应该也大致相同, 但还是要根据不同平台调整.</p></div><footer class="content__footer"><div class="entry-wrapper"><div class="content__actions"></div></div><nav class="content__nav"><div class="wrapper"><div class="content__nav-inner"><div class="content__nav-prev"><a href="https://blog.merack.top/xin-de-kai-shi.html" class="content__nav-link" rel="prev"><div><span>Previous</span> 新的开始</div></a></div><div class="content__nav-next"><a href="https://blog.merack.top/ubuntu2404an-zhuang-mysql80yu-dao-de-yi-xie-wen-ti-shu-ju-ku-rootzhang-hu-she-zhi-mi-ma-wu-xiao-rootzhang-hu-wu-xu-mi-ma-huo-mi-ma-cuo-wu-du-ke-deng-lu-yi-ji-qi-ta-cao-zuo-ji-lu.html" class="content__nav-link" rel="next"><div><span>Next</span> 解决Ubuntu安装MySQL8.0后 数据库root设置密码无效, root无需密码或密码错误都可登录</div></a></div></div></div></nav></footer></article></main><footer class="footer"><div class="wrapper"><div class="footer__copyright"><p>Powered by Publii</p><div style="flex; align-items: center; justify-content: center;"><a href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral"><img style="margin-right: 1px; vertical-align: middle;" src="https://cdn.merack.top/wp-content/uploads/2024/12/8a9de8d6-7a3c-e553-b074-cf653f15d712.png" alt="upyun"> </a>提供CDN服务</div></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg width="20" height="20"><use xlink:href="https://blog.merack.top/assets/svg/svg-map.svg#toparrow"/></svg></button></div></footer><script defer="defer" src="https://blog.merack.top/assets/js/scripts.min.js"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'overlay',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>